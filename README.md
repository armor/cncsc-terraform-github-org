<a href="https://cncsc.io">
  <img src="https://raw.githubusercontent.com/cncsc/.meta/main/img/cncsc-logo-mid.svg" alt="Cloud-Native Cybersecurity Collective Logo" align="right">
</a>

# terraform-github-org

[![Continuous Integration Status][ci_badge_image]][ci_badge_link]
[![Continuous Deployment Status][cd_badge_image]][cd_badge_link]
[![Release][release_badge_image]][release_badge_link]
[![License][license_badge_image]][license_badge_link]
[![Maintained by Armor][maintainer_badge_image]][maintainer_badge_link]

This repository contains modules for deploying and managing a [GitHub organisation](https://help.github.com/articles/about-organizations/).

## Importing

To import an existing org's settings, get the org's ID from the GitHub API:

```bash
curl -sSL https://api.github.com/orgs/<ORG_NAME> | jq .id
```

Then run the import:

```bash
terraform import module.org.module.settings.github_organization_settings.settings <ORG_ID>
```

## Requirements

| Name                                                                      | Version    |
|---------------------------------------------------------------------------|------------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 0.12.26 |
| <a name="requirement_github"></a> [github](#requirement\_github)          | >= 5.7.0   |

## Modules

| Name                                                         | Source                                               | Version |
|--------------------------------------------------------------|------------------------------------------------------|---------|
| <a name="module_block"></a> [block](#module\_block)          | [github-org-block](./modules/github-org-block)       | n/a     |
| <a name="module_settings"></a> [settings](#module\_settings) | [github-org-settings](./modules/github-org-settings) | n/a     |
| <a name="module_webhook"></a> [webhook](#module\_webhook)    | [github-org-webhook](./modules/github-org-webhook)   | n/a     |

## Inputs

| Name                                                                                                                                                                                                                                 | Description                                                                                                            | Type                                                                                                                                                                                                                                         | Default  | Required |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|:--------:|
| <a name="input_advanced_security_enabled_for_new_repositories"></a> [advanced\_security\_enabled\_for\_new\_repositories](#input\_advanced\_security\_enabled\_for\_new\_repositories)                                               | Whether or not advanced security is enabled for new repositories.                                                      | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_billing_email"></a> [billing\_email](#input\_billing\_email)                                                                                                                                                          | The billing email address for the organization.                                                                        | `string`                                                                                                                                                                                                                                     | n/a      |   yes    |
| <a name="input_blocked_users"></a> [blocked\_users](#input\_blocked\_users)                                                                                                                                                          | A set of users who are barred from joining and requesting to join the organization.                                    | `set(string)`                                                                                                                                                                                                                                | `[]`     |    no    |
| <a name="input_blog"></a> [blog](#input\_blog)                                                                                                                                                                                       | The blog URL for the organization.                                                                                     | `string`                                                                                                                                                                                                                                     | `null`   |    no    |
| <a name="input_company"></a> [company](#input\_company)                                                                                                                                                                              | The company name for the organization.                                                                                 | `string`                                                                                                                                                                                                                                     | `null`   |    no    |
| <a name="input_default_repository_permission"></a> [default\_repository\_permission](#input\_default\_repository\_permission)                                                                                                        | The default permission for organization members to create new repositories. Can be one of read, write, admin, or none. | `string`                                                                                                                                                                                                                                     | `"none"` |    no    |
| <a name="input_dependabot_alerts_enabled_for_new_repositories"></a> [dependabot\_alerts\_enabled\_for\_new\_repositories](#input\_dependabot\_alerts\_enabled\_for\_new\_repositories)                                               | Whether or not dependabot alerts are enabled for new repositories.                                                     | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_dependabot_security_updates_enabled_for_new_repositories"></a> [dependabot\_security\_updates\_enabled\_for\_new\_repositories](#input\_dependabot\_security\_updates\_enabled\_for\_new\_repositories)               | Whether or not dependabot security updates are enabled for new repositories.                                           | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_dependency_graph_enabled_for_new_repositories"></a> [dependency\_graph\_enabled\_for\_new\_repositories](#input\_dependency\_graph\_enabled\_for\_new\_repositories)                                                  | Whether or not dependency graph is enabled for new repositories.                                                       | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_description"></a> [description](#input\_description)                                                                                                                                                                  | The description for the organization.                                                                                  | `string`                                                                                                                                                                                                                                     | `null`   |    no    |
| <a name="input_email"></a> [email](#input\_email)                                                                                                                                                                                    | The email address for the organization.                                                                                | `string`                                                                                                                                                                                                                                     | `null`   |    no    |
| <a name="input_has_organization_projects"></a> [has\_organization\_projects](#input\_has\_organization\_projects)                                                                                                                    | Whether or not organization projects are enabled for the organization.                                                 | `bool`                                                                                                                                                                                                                                       | `false`  |    no    |
| <a name="input_has_repository_projects"></a> [has\_repository\_projects](#input\_has\_repository\_projects)                                                                                                                          | Whether or not repository projects are enabled for the organization.                                                   | `bool`                                                                                                                                                                                                                                       | `false`  |    no    |
| <a name="input_location"></a> [location](#input\_location)                                                                                                                                                                           | The location for the organization.                                                                                     | `string`                                                                                                                                                                                                                                     | `null`   |    no    |
| <a name="input_members_can_create_internal_repositories"></a> [members\_can\_create\_internal\_repositories](#input\_members\_can\_create\_internal\_repositories)                                                                   | Whether or not organization members can create new internal repositories. For Enterprise Organizations only.           | `bool`                                                                                                                                                                                                                                       | `null`   |    no    |
| <a name="input_members_can_create_pages"></a> [members\_can\_create\_pages](#input\_members\_can\_create\_pages)                                                                                                                     | Whether or not organization members can create new pages.                                                              | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_members_can_create_private_pages"></a> [members\_can\_create\_private\_pages](#input\_members\_can\_create\_private\_pages)                                                                                           | Whether or not organization members can create new private pages.                                                      | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_members_can_create_private_repositories"></a> [members\_can\_create\_private\_repositories](#input\_members\_can\_create\_private\_repositories)                                                                      | Whether or not organization members can create new private repositories.                                               | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_members_can_create_public_pages"></a> [members\_can\_create\_public\_pages](#input\_members\_can\_create\_public\_pages)                                                                                              | Whether or not organization members can create new public pages.                                                       | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_members_can_create_public_repositories"></a> [members\_can\_create\_public\_repositories](#input\_members\_can\_create\_public\_repositories)                                                                         | Whether or not organization members can create new public repositories.                                                | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_members_can_create_repositories"></a> [members\_can\_create\_repositories](#input\_members\_can\_create\_repositories)                                                                                                | Whether or not organization members can create new repositories.                                                       | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_members_can_fork_private_repositories"></a> [members\_can\_fork\_private\_repositories](#input\_members\_can\_fork\_private\_repositories)                                                                            | Whether or not organization members can fork private repositories.                                                     | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_name"></a> [name](#input\_name)                                                                                                                                                                                       | The name for the organization.                                                                                         | `string`                                                                                                                                                                                                                                     | n/a      |   yes    |
| <a name="input_secret_scanning_enabled_for_new_repositories"></a> [secret\_scanning\_enabled\_for\_new\_repositories](#input\_secret\_scanning\_enabled\_for\_new\_repositories)                                                     | Whether or not secret scanning is enabled for new repositories.                                                        | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_secret_scanning_push_protection_enabled_for_new_repositories"></a> [secret\_scanning\_push\_protection\_enabled\_for\_new\_repositories](#input\_secret\_scanning\_push\_protection\_enabled\_for\_new\_repositories) | Whether or not secret scanning push protection is enabled for new repositories.                                        | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_twitter_username"></a> [twitter\_username](#input\_twitter\_username)                                                                                                                                                 | The Twitter username for the organization.                                                                             | `string`                                                                                                                                                                                                                                     | `null`   |    no    |
| <a name="input_web_commit_signoff_required"></a> [web\_commit\_signoff\_required](#input\_web\_commit\_signoff\_required)                                                                                                            | Whether or not commit signatures are required for commits to the organization.                                         | `bool`                                                                                                                                                                                                                                       | `true`   |    no    |
| <a name="input_webhooks"></a> [webhooks](#input\_webhooks)                                                                                                                                                                           | A list of organization webhook configurations.                                                                         | <pre>list(object({<br>    events       = list(string),<br>    url          = string,<br>    content_type = optional(string, "json"),<br>    insecure_ssl = optional(bool, false),<br>    active       = optional(bool, true),<br>  }))</pre> | `[]`     |    no    |

## Outputs

| Name                                       | Description                 |
|--------------------------------------------|-----------------------------|
| <a name="output_id"></a> [id](#output\_id) | The ID of the organization. |

[ci_badge_image]:https://img.shields.io/github/actions/workflow/status/cncsc/terraform-github-org/ci.yaml?branch=main&label=ci&logo=github
[ci_badge_link]:https://github.com/cncsc/terraform-github-org/actions/workflows/ci.yaml
[cd_badge_image]:https://img.shields.io/github/actions/workflow/status/cncsc/terraform-github-org/cd.yaml?branch=main&label=cd&logo=github
[cd_badge_link]:https://github.com/cncsc/terraform-github-org/actions/workflows/cd.yaml
[release_badge_image]:https://img.shields.io/github/v/release/cncsc/terraform-github-org?logo=terraform
[release_badge_link]:https://registry.terraform.io/modules/cncsc/org/github/latest
[license_badge_image]:https://img.shields.io/github/license/cncsc/terraform-github-org
[license_badge_link]:./LICENSE
[maintainer_badge_image]:https://img.shields.io/badge/maintainer-Armor-f60
[maintainer_badge_link]:https://www.armor.com/?utm_source=github&utm_medium=organic_oss&utm_campaign=terraform-github-org
